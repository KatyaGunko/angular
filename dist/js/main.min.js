!function(){"use strict";function t(t,e,r,o,i,n){function a(t){return l(function(){r(t).toggle()},200)}function l(r,o,i){var n;return function(){var i=t,a=Array.prototype.slice.call(arguments);e.cancel(n),n=e(function(){n=void 0,r.apply(i,a)},o||10)}}t.toggleLeft=a("left"),i.getTop20({},function(t){n.createMoviesList(t.data.movies)},function(t){o.show(o.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Error!").textContent("Sorry, something went wrong while getting data from server.").ariaLabel("Alert Dialog").ok("OK"))})}t.$inject=["$scope","$timeout","$mdSidenav","$mdDialog","resource","Movies"],angular.module("fabwareApp",["ngMaterial","ngRoute","chart.js","Resources","utils","menu"]),angular.module("fabwareApp").controller("mainCtrl",t)}(),function(){"use strict";angular.module("Resources",["ngResource"]),angular.module("Resources").factory("resource",["$resource",function(t){return t("",{},{getTop20:{method:"GET",url:"./json-resource/movies.json",isArray:!1},getTrailers:{method:"GET",url:"./json-resource/:id.json",isArray:!1}})}])}(),function(){"use strict";angular.module("fabwareApp").config(["$routeProvider",function(t){t.when("/",{templateUrl:"./views/home.html",controller:"homeCtrl",controllerAs:"hc"}).when("/chart",{templateUrl:"./views/chart.html",controller:"chartCtrl",controllerAs:"cc"}).when("/favorites",{templateUrl:"./views/favorites.html",controller:"favoritesCtrl",controllerAs:"fc"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("fabwareApp").config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("lime").accentPalette("lime")}])}(),function(){"use strict";angular.module("fabwareApp").factory("ChartData",function(){var t=function(t){var e=this.createChronologicalObject(t);this.buildChartData(e)};return t.prototype.createChronologicalObject=function(t){for(var e={},r=0,o=t.length;o>r;r++){var i=Math.floor(+t[r].year/10);e[i]=e[i]?+e[i]+1:1}return e},t.prototype.buildChartData=function(t){this.labels=[],this.data=[],this.colours=Chart.defaults.global.colours;for(var e in t)t.hasOwnProperty(e)&&(this.labels.push(e+"0 - "+(+e+1)+"0"),this.data.push(t[e]))},t})}(),function(){"use strict";function t(t,e,r){var o=this,i=new r(e.moviesList);o.labels=i.labels,o.data=i.data,o.colours=i.colours}t.$inject=["$scope","Movies","ChartData"],angular.module("fabwareApp").controller("chartCtrl",t)}(),function(){"use strict";function t(t,e){var r=this;r.movies=e.moviesList}t.$inject=["$scope","Movies"],angular.module("fabwareApp").controller("favoritesCtrl",t)}(),function(){"use strict";function t(t,e){var r=this;r.movies=e.moviesList}t.$inject=["$scope","Movies"],angular.module("fabwareApp").controller("homeCtrl",t)}(),function(){"use strict";angular.module("fabwareApp").factory("Movie",["$localstorage","resource",function(t,e){var r=function(t){this.id=t.idIMDB||"",this.title=t.title||"",this.year=t.year||"",this.directors=angular.copy(t.directors)||[],this.poster=t.urlPoster||"",this.plot=t.plot||"",this.genres=angular.copy(t.genres)||[],this.rating=t.rating||0,this.countries=angular.copy(t.countries)||[]};return r.prototype.getTrailers=function(){var t=this,r={id:t.id};e.getTrailers(r,function(e){t.trailers=[],e.data&&e.data.trailer&&(t.trailers=e.data.trailer)},function(t){})},r.prototype.toggleFavorite=function(){var e=t.getObject("Favorites")||[],r=e.indexOf(this.id);this.favorite=-1===r,this.favorite?(e.push(this.id),t.setObject("Favorites",e),console.log("added to favorites")):(e.splice(r,1),t.setObject("Favorites",e),console.log("removed from favorites"))},r.prototype.checkFavorite=function(){var e=t.getObject("Favorites")||[],r=e.indexOf(this.id);this.favorite=!(-1===r)},r}])}(),function(){"use strict";angular.module("fabwareApp").service("Movies",["Movie",function(t){var e=this;e.moviesList=[],this.createMoviesList=function(r){for(var o=0,i=r.length;i>o;o++){var n=new t(r[o]);n.checkFavorite(),n.getTrailers(),e.moviesList.push(n)}}}])}(),function(){"use strict";function t(t,e,r){var o=this;o.showVideoPopup=function(o,i){var n=(e("sm")||e("xs"))&&t.customFullscreen;r.show({controller:"popupCtrl",controllerAs:"pc",templateUrl:"./src/modules/shared/videoPopup/videoPopup.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,fullscreen:n,locals:{trailer:i}}).then(function(){console.log("trailer closed")}),t.$watch(function(){return e("xs")||e("sm")},function(e){t.customFullscreen=e===!0})}}function e(t,e,r){}t.$inject=["$scope","$mdMedia","$mdDialog"],angular.module("fabwareApp").directive("card",function(){return{restrict:"E",templateUrl:"./src/modules/shared/card/cardDirective.html",scope:{movies:"=movies",filterfavorites:"=filterfavorites"},controller:t,link:e,controllerAs:"cc"}})}(),function(){"use strict";angular.module("utils",[]),angular.module("utils").factory("$localstorage",["$window",function(t){return{set:function(e,r){t.localStorage[e]=r},get:function(e,r){return t.localStorage[e]||r},setObject:function(e,r){t.localStorage[e]=JSON.stringify(r)},getObject:function(t){return void 0!==window.localStorage[t]?JSON.parse(window.localStorage[t]):void 0}}}])}(),function(){"use strict";function t(t){}function e(t,e,r){}t.$inject=["$scope"],angular.module("menu",[]),angular.module("menu").directive("sideNav",function(){return{restrict:"E",templateUrl:"./src/modules/shared/sidenav/sidenav.html",controller:t,link:e,controllerAs:"sn"}})}(),function(){"use strict";function t(t,e,r,o){var i=this;i.trailer=r.trustAsHtml(o.embed),i.title=o.title,i.close=function(){e.cancel()}}t.$inject=["$scope","$mdDialog","$sce","trailer"],angular.module("fabwareApp").controller("popupCtrl",t)}();